(this["webpackJsonppandemic-helper"]=this["webpackJsonppandemic-helper"]||[]).push([[0],{10:function(e,n,a){"use strict";(function(e){a.d(n,"a",(function(){return m})),a.d(n,"b",(function(){return s}));var t=a(18),o=a(13),c=a(6),r=a(1),l=a.n(r),i=function(){var n=window.location.hash;return n?JSON.parse(e.from(n,"base64").toString()):{}},u=Object(r.createContext)(void 0),m=function(e){var n=e.children,a=Object(r.useState)(i()),t=Object(c.a)(a,2),o=t[0],m=t[1];console.log(o);var s=u.Provider;return l.a.createElement(s,{value:[o,m]},n)},s=function(n,a){var l=Object(r.useContext)(u),m=Object(c.a)(l,2),s=m[0],d=m[1],b=function(n){!function(n){window.location.hash=e.from(JSON.stringify(n)).toString("base64")}(n)};Object(r.useEffect)((function(){var e=function(){return d(i())};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}));var f=n?s[n]:s,p=n?function(e){var a=Object(o.a)({},s,Object(t.a)({},n,e));b(a)}:function(e){return b(e)};return[void 0===f&&a?a():f,p]}}).call(this,a(42).Buffer)},35:function(e,n,a){e.exports=a(54)},40:function(e,n,a){},54:function(e,n,a){"use strict";a.r(n);var t=a(1),o=a.n(t),c=a(14),r=a.n(c),l=(a(40),a(41),a(6)),i=a(13),u=a(58),m=a(10),s=a(60),d=a(61),b=a(7),f=function(e){var n=e.id,a=e.config,t=Object(m.b)(),c=Object(l.a)(t,2)[1];return o.a.createElement(s.a.Group,{controlId:"init.save-config"},o.a.createElement(d.a,{variant:"success",type:"submit",onClick:function(){return c({game:n,config:a})}},o.a.createElement(b.e,{size:24})," Start"))},p=a(56),g=a(31),E=a(57),h=function(e,n,a){var t=v(e,n,a),c=Object(l.a)(t,5),r=c[0],i=c[1],u=c[2],m=c[3],b=c[4];return[r,function(){return o.a.createElement(s.a.Group,{as:p.a,controlId:"init.game-config.epidemics"},o.a.createElement(s.a.Label,{column:!0,xs:"8"},"Epidemic Count"),o.a.createElement(g.a,{xs:"4"},o.a.createElement(E.a,{size:"md"},o.a.createElement(E.a.Prepend,null,o.a.createElement(d.a,{variant:"outline-secondary",onClick:u,disabled:!b},"-")),o.a.createElement(s.a.Control,{type:"text",disabled:!0,value:r}),o.a.createElement(E.a.Append,null,o.a.createElement(d.a,{variant:"outline-secondary",onClick:i,disabled:!m},"+")))))}]},y=function(){var e=v(2,4,4),n=Object(l.a)(e,5),a=n[0],t=n[1],c=n[2],r=n[3],i=n[4];return[a,function(){return o.a.createElement(s.a.Group,{as:p.a,controlId:"init.game-config.players"},o.a.createElement(s.a.Label,{column:!0,xs:"8"},"Player Count"),o.a.createElement(g.a,{xs:"4"},o.a.createElement(E.a,{size:"md"},o.a.createElement(E.a.Prepend,null,o.a.createElement(d.a,{variant:"outline-secondary",onClick:c,disabled:!i},"-")),o.a.createElement(s.a.Control,{type:"text",disabled:!0,value:a}),o.a.createElement(E.a.Append,null,o.a.createElement(d.a,{variant:"outline-secondary",onClick:t,disabled:!r},"+")))))}]},v=function(e,n,a){var o=Object(t.useState)(a),c=Object(l.a)(o,2),r=c[0],i=c[1],u=r<n,m=r>e;return[r,function(){u&&i(r+1)},function(){m&&i(r-1)},u,m]},w={name:"Vanilla",Config:function(e){var n=e.id,a=y(),t=Object(l.a)(a,2),c=t[0],r=t[1],i=h(4,6,5),u=Object(l.a)(i,2),m=u[0],s=u[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(r,null),o.a.createElement(s,null),o.a.createElement(f,{id:n,config:{players:c,epidemics:m}}))},cities:function(){return[{name:"Algiers",color:"black",count:1},{name:"Atlanta",color:"blue",count:1},{name:"Baghdad",color:"black",count:1},{name:"Bangkok",color:"red",count:1},{name:"Beijing",color:"red",count:1},{name:"Bogot\xe1",color:"yellow",count:1},{name:"Buenos Aires",color:"yellow",count:1},{name:"Cairo",color:"black",count:1},{name:"Chennai",color:"black",count:1},{name:"Chicago",color:"blue",count:1},{name:"Delhi",color:"black",count:1},{name:"Essen",color:"blue",count:1},{name:"Ho Chi Minh City",color:"red",count:1},{name:"Hong Kong",color:"red",count:1},{name:"Istanbul",color:"black",count:1},{name:"Jakarta",color:"red",count:1},{name:"Johannesburg",color:"yellow",count:1},{name:"Karachi",color:"black",count:1},{name:"Khartoum",color:"yellow",count:1},{name:"Kinshasa",color:"yellow",count:1},{name:"Kolkata",color:"black",count:1},{name:"Lagos",color:"yellow",count:1},{name:"Lima",color:"yellow",count:1},{name:"London",color:"blue",count:1},{name:"Los Angeles",color:"yellow",count:1},{name:"Madrid",color:"blue",count:1},{name:"Manila",color:"red",count:1},{name:"Mexico City",color:"yellow",count:1},{name:"Miami",color:"yellow",count:1},{name:"Milan",color:"blue",count:1},{name:"Montr\xe9al",color:"blue",count:1},{name:"Moscow",color:"black",count:1},{name:"Mumbai",color:"black",count:1},{name:"New York",color:"blue",count:1},{name:"Osaka",color:"red",count:1},{name:"Paris",color:"blue",count:1},{name:"Riyadh",color:"black",count:1},{name:"San Francisco",color:"blue",count:1},{name:"Santiago",color:"yellow",count:1},{name:"S\xe3o Paulo",color:"yellow",count:1},{name:"Seoul",color:"red",count:1},{name:"Shanghai",color:"red",count:1},{name:"St. Petersburg",color:"blue",count:1},{name:"Sydney",color:"red",count:1},{name:"Taipei",color:"red",count:1},{name:"Tehran",color:"black",count:1},{name:"Tokyo",color:"red",count:1},{name:"Washington",color:"blue",count:1}]}},k={name:"Legacy Season 1",Config:function(e){var n=e.id,a=y(),t=Object(l.a)(a,2),c=t[0],r=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(r,null),o.a.createElement(s.a.Group,{controlId:"init.game-config"},o.a.createElement("span",{className:"text-muted"},"No configuration options.")),o.a.createElement(f,{id:n,config:{players:c}}))},cities:function(){return[{name:"Algiers",color:"black",count:1},{name:"Atlanta",color:"blue",count:1},{name:"Baghdad",color:"black",count:1},{name:"Bangkok",color:"red",count:1},{name:"Beijing",color:"red",count:1},{name:"Bogot\xe1",color:"yellow",count:1},{name:"Buenos Aires",color:"yellow",count:1},{name:"Cairo",color:"black",count:1},{name:"Chennai",color:"black",count:1},{name:"Chicago",color:"blue",count:1},{name:"Delhi",color:"black",count:1},{name:"Essen",color:"blue",count:1},{name:"Ho Chi Minh City",color:"red",count:1},{name:"Hong Kong",color:"red",count:1},{name:"Istanbul",color:"black",count:1},{name:"Jakarta",color:"red",count:1},{name:"Johannesburg",color:"yellow",count:1},{name:"Karachi",color:"black",count:1},{name:"Khartoum",color:"yellow",count:1},{name:"Kinshasa",color:"yellow",count:1},{name:"Kolkata",color:"black",count:1},{name:"Lagos",color:"yellow",count:1},{name:"Lima",color:"yellow",count:1},{name:"London",color:"blue",count:1},{name:"Los Angeles",color:"yellow",count:1},{name:"Madrid",color:"blue",count:1},{name:"Manila",color:"red",count:1},{name:"Mexico City",color:"yellow",count:1},{name:"Miami",color:"yellow",count:1},{name:"Milan",color:"blue",count:1},{name:"Montr\xe9al",color:"blue",count:1},{name:"Moscow",color:"black",count:1},{name:"Mumbai",color:"black",count:1},{name:"New York",color:"blue",count:1},{name:"Osaka",color:"red",count:1},{name:"Paris",color:"blue",count:1},{name:"Riyadh",color:"black",count:1},{name:"San Francisco",color:"blue",count:1},{name:"Santiago",color:"yellow",count:1},{name:"S\xe3o Paulo",color:"yellow",count:1},{name:"Seoul",color:"red",count:1},{name:"Shanghai",color:"red",count:1},{name:"St. Petersburg",color:"blue",count:1},{name:"Sydney",color:"red",count:1},{name:"Taipei",color:"red",count:1},{name:"Tehran",color:"black",count:1},{name:"Tokyo",color:"red",count:1},{name:"Washington",color:"blue",count:1}]}},x=a(18),O=[{name:"Cairo",color:"black",count:3},{name:"Istanbul",color:"black",count:3},{name:"Jacksonville",color:"yellow",count:3},{name:"Lagos",color:"yellow",count:3},{name:"London",color:"blue",count:3},{name:"New York",color:"blue",count:3},{name:"S\xe3o Paulo",color:"yellow",count:3},{name:"Tripoli",color:"black",count:3},{name:"Washington",color:"blue",count:3}],j=[{name:"North America",cities:[{name:"Atlanta",color:"blue",count:1},{name:"Chicago",color:"blue",count:2},{name:"Denver",color:"blue",count:1},{name:"Los Angeles",color:"yellow",count:1},{name:"Mexico City",color:"yellow",count:1},{name:"San Francisco",color:"blue",count:2}]},{name:"South America",cities:[{name:"Bogot\xe1",color:"yellow",count:2},{name:"Buenos Aires",color:"yellow",count:2},{name:"Lima",color:"yellow",count:1},{name:"Santiago",color:"yellow",count:1}]},{name:"Europe",cities:[{name:"Frankfurt",color:"blue",count:2},{name:"Moscow",color:"black",count:1},{name:"Paris",color:"blue",count:2},{name:"St. Petersburg",color:"blue",count:1}]},{name:"Africa",cities:[{name:"Antananarivo",color:"black",count:2},{name:"Dar es Salaam",color:"yellow",count:2},{name:"Johannesburg",color:"blue",count:2},{name:"Khartoum",color:"yellow",count:1},{name:"Kinshasa",color:"yellow",count:1}]}],C=[w,k,{name:"Legacy Season 2",Config:function(e){var n=e.id,a=y(),c=Object(l.a)(a,2),r=c[0],u=c[1],m=h(1,20,5),d=Object(l.a)(m,2),b=d[0],p=d[1],E=Object(t.useState)({}),v=Object(l.a)(E,2),w=v[0],k=v[1],O=j,C=function(e){return!!w[e]},S=Object.keys(w).flatMap((function(e){return O[e].cities.map((function(n,a){return{reconId:e,id:a,city:n}}))}));S.sort((function(e,n){return e.city.name.localeCompare(n.city.name)}));var N=function(e,n){return w[e].includes(n)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(u,null),o.a.createElement(p,null),o.a.createElement(s.a.Row,{className:"mb-3"},o.a.createElement(s.a.Label,{column:!0,xs:"8"},"Recons Completed"),o.a.createElement(g.a,{xs:"4"},O.map((function(e,n){return o.a.createElement(s.a.Group,{key:n,controlId:"init.game-config.recons.".concat(n),className:"mb-1"},o.a.createElement(s.a.Check,{type:"switch",label:e.name,checked:C(n),onChange:function(){var e;C(e=n)?(delete w[e],k(Object(i.a)({},w))):k(Object(i.a)({},w,Object(x.a)({},e,j[e].cities.map((function(e,n){return n})))))}}))})))),S.length>0&&o.a.createElement(s.a.Row,{className:"mb-3"},o.a.createElement(s.a.Label,{column:!0,xs:"8"},"Cities Connected"),o.a.createElement(g.a,{xs:"4"},S.map((function(e){var n=e.reconId,a=e.id,t=e.city;return o.a.createElement(s.a.Group,{key:"".concat(n,".").concat(a),controlId:"init.game-config.cities.".concat(n,".").concat(a),className:"mb-1"},o.a.createElement(s.a.Check,{type:"switch",label:t.name,checked:N(n,a),onChange:function(){return function(e,n){N(e,n)?(w[e]=w[e].filter((function(e){return e!==n})),k(Object(i.a)({},w))):(w[e]=w[e].concat([n]),k(Object(i.a)({},w)))}(n,a)}}))})))),o.a.createElement(f,{id:n,config:{players:r,epidemics:b,recons:w}}))},cities:function(e){var n=e.recons,a=Object.entries(n).flatMap((function(e){var n=Object(l.a)(e,2),a=n[0],t=n[1];return j[a].cities.filter((function(e,n){return t.includes(n)}))}));return O.concat(a).sort((function(e,n){return e.name.localeCompare(n.name)}))}}],S=a(59),N=a(19),M={blue:"rgba(52, 152, 219, 0.8)",red:"rgba(231, 76, 60, 0.7)",yellow:"rgba(241, 224, 19, 0.6)",black:"rgba(127, 140, 141, 0.8)"},z=Object(N.a)({card:{fontWeight:400,fontSize:"18px",padding:"5px 7px",borderBottom:"1px solid #6b6b6b","& > span":{height:"50px",lineHeight:"34px"},backgroundColor:function(e){return M[e.color]}},extra:{paddingLeft:"0 !important","& button":{paddingLeft:"0 !important",paddingRight:"0 !important"}},extraModalButton:{width:"100%",marginTop:"10px"}}),B=function(e){var n=e.card,a=e.infect,c=e.epidemic,r=e.remove,i=e.unremove,u=e.showEpidemic,m=e.showDraw,s=Object(t.useState)(!1),f=Object(l.a)(s,2),p=f[0],g=f[1],E=function(){return g(!1)},h=n.city,y=n.id,v=n.count,w=h.color,k=h.name,x=h.count,O=z({color:w}),j=function(e){return function(){E(),e(y)}},C=[];a&&!m&&C.push(o.a.createElement(d.a,{className:O.extraModalButton,size:"lg",variant:"primary",onClick:j(a)},o.a.createElement(b.d,{size:26})," Force Draw")),c&&!u&&C.push(o.a.createElement(d.a,{className:O.extraModalButton,size:"lg",variant:"success",onClick:j(c)},o.a.createElement(b.a,{size:26})," Force Epidemic")),r&&C.push(o.a.createElement(d.a,{className:O.extraModalButton,size:"lg",variant:"danger",onClick:j(r)},o.a.createElement(b.j,{size:26})," Remove from Play")),i&&C.push(o.a.createElement(d.a,{className:O.extraModalButton,size:"lg",variant:"primary",onClick:j(i)},o.a.createElement(b.b,{size:26})," Return to Play"));var N=0!==C.length,M=o.a.createElement("span",{className:"mr-auto p-2"},k),B=o.a.createElement("span",{className:"p-2 text-monospace"},o.a.createElement("span",null,v),o.a.createElement("span",{className:"text-muted text-monospace"},"/"),o.a.createElement("span",{className:"text-muted text-monospace"},x));return o.a.createElement("div",{className:"d-flex ".concat(O.card)},M,B,m&&a&&o.a.createElement("span",{className:"p-2"},o.a.createElement(d.a,{size:"xs",onClick:function(){return a(y)}},o.a.createElement(b.d,{size:18}))),u&&c&&o.a.createElement("span",{className:"p-2"},o.a.createElement(d.a,{variant:"success",size:"xs",onClick:function(){return c(y)}},o.a.createElement(b.a,{size:18}))),N&&o.a.createElement("span",{className:"p-2 ".concat(O.extra)},o.a.createElement(d.a,{variant:"secondary-outline",size:"xs",onClick:function(){return g(!0)}},o.a.createElement(b.h,{size:18}))),N&&o.a.createElement(S.a,{show:N&&p,onHide:E},o.a.createElement(S.a.Header,{closeButton:!0},o.a.createElement(S.a.Title,null,"Additional Actions")),o.a.createElement(S.a.Body,null,o.a.createElement("div",{className:"d-flex ".concat(O.card)},M,B),C.map((function(e,n){return o.a.createElement("div",{key:n},e)})))))},L=a(21),A=function(e,n){var a={};return e.forEach((function(e,t){var o=I(t,n);e.count>o&&T(t,a,e.count-o)})),a},P=function(e,n,a){var t=[];return Object.entries(a).forEach((function(a){var o=Object(l.a)(a,2),c=o[0],r=o[1],i=!!n&&0===I(c,n);t.push(D(c,r,i,e[c])),n&&T(c,n,r)})),t.sort((function(e,n){return e.city.name.localeCompare(n.city.name)})),t},D=function(e,n,a,t){return{city:t,id:e,count:n,first:a}},I=function(e,n){return n[e]||0},K=function(e,n){var a=I(e,n);return a>0&&(a>1?n[e]--:delete n[e],!0)},T=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;I(e,n)<=0&&(n[e]=0),n[e]=n[e]+a},F=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),t=1;t<n;t++)a[t-1]=arguments[t];a.find((function(n){return K(e,n)}))},R=function(e,n){n[e]||(n[e]=0),n[e]++},G=Object(N.a)({footer:{backgroundColor:"#f3f3f3",height:"60px",lineHeight:"60px",fontSize:"20px",boxSizing:"border-box",borderTop:"1px solid #5f5f5f",position:"fixed",bottom:0,width:"100%"},buttons:{padding:"0 15px",flexGrow:1,textAlign:"center","& button":{marginRight:"15px","&:last-child":{marginRight:0}}}}),J=function(){var e=Object(m.b)(),n=Object(l.a)(e,2),a=n[0],t=n[1],c=G();return o.a.createElement("div",{className:"d-flex ".concat(c.footer)},o.a.createElement("span",{className:c.buttons},o.a.createElement(d.a,{variant:"outline-primary",onClick:function(){return window.history.back()}},o.a.createElement(b.f,{size:24})),o.a.createElement(d.a,{variant:"outline-secondary",onClick:function(){return t({game:a.game,config:a.config})}},o.a.createElement(b.c,{size:24})),o.a.createElement(d.a,{variant:"outline-danger",onClick:function(){return t({})}},o.a.createElement(b.i,{size:24})),o.a.createElement(d.a,{variant:"outline-primary",onClick:function(){return window.history.forward()}},o.a.createElement(b.g,{size:24}))))},H=Object(N.a)({content:{padding:"0 0 ".concat("60px"," 0")},sectionTitle:{padding:"25px 15px",margin:0,borderBottom:"1px solid #5f5f5f"}}),W=function(){var e=H(),n=Object(m.b)("game"),a=Object(l.a)(n,1)[0],t=Object(m.b)("config"),c=Object(l.a)(t,1)[0],r=C[a].cities(c),s=Object(m.b)("infectionDeck",(function(){return{epidemics:[],discard:{},removed:{}}})),d=Object(l.a)(s,2),b=d[0],f=d[1],p=function(e,n){var a={},t={};t.epidemics=e.epidemics.slice(0).reverse().map((function(e){return P(n,a,e)})),t.discard=P(n,a,e.discard),t.removed=P(n,a,e.removed);var o=A(n,a);return t.unseen=P(n,null,o),{explodedDeck:t,missingSection:o}}(b,r),g=p.explodedDeck,E=p.missingSection,h=function(e){!function(e,n,a){F.apply(void 0,[e].concat(Object(L.a)([n].concat(Object(L.a)(a)).reverse())))}(e,E,b.epidemics),R(e,b.discard),f(Object(i.a)({},b))},y=function(e){!function(e,n,a){F.apply(void 0,[e,n].concat(Object(L.a)(a)))}(e,E,b.epidemics),R(e,b.discard),b.epidemics.push(b.discard),b.discard={},f(Object(i.a)({},b))},v=function(e){return function(n){K(n,e),R(n,b.removed),f(b)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{fluid:!0,className:e.content},g.epidemics.map((function(e,n){return o.a.createElement(Y,{key:n,name:"Epidemic #".concat(g.epidemics.length-n),cards:e,infect:h,epidemic:y,remove:v(b.epidemics[b.epidemics.length-1-n]),showEpidemic:!1,showDraw:0===g.epidemics.slice(0,n).flatMap((function(e){return e})).length})})),o.a.createElement(Y,{name:"Main Deck",cities:r,cards:g.unseen,infect:h,epidemic:y,remove:v(E),showEpidemic:!0,showDraw:0===g.epidemics.flatMap((function(e){return e})).length}),o.a.createElement(Y,{name:"Discard",cities:r,cards:g.discard,remove:v(b.discard)}),o.a.createElement(Y,{name:"Removed from Play",cities:r,cards:g.removed,unremove:function(e){K(e,b.removed),f(b)}})),o.a.createElement(J,null))},Y=function(e){var n=e.name,a=e.cards,t=e.infect,c=e.epidemic,r=e.remove,l=e.unremove,i=e.showEpidemic,u=e.showDraw,m=H();return!a||a.length<=0?o.a.createElement(o.a.Fragment,null):o.a.createElement("div",null,o.a.createElement("h3",{className:m.sectionTitle},n),a.map((function(e,n){return o.a.createElement(B,{key:n,card:e,infect:t,epidemic:c,remove:r,unremove:l,showEpidemic:i,showDraw:u})})))},V=function(){var e=Object(t.useState)(0),n=Object(l.a)(e,2),a=n[0],c=n[1],r=C[a].Config;return o.a.createElement(u.a,{fluid:!0,className:"main-content"},o.a.createElement("h3",null,"Start a New Game"),o.a.createElement(s.a,null,o.a.createElement(s.a.Group,{controlId:"init.game-name"},o.a.createElement(s.a.Label,null,"Game Version"),o.a.createElement(s.a.Control,{as:"select",value:a,onChange:function(e){return c(e.target.value)}},C.map((function(e,n){return o.a.createElement("option",{key:n,value:n},e.name)})))),o.a.createElement(r,{id:a})))},q=function(){var e=Object(m.b)("game"),n=Object(l.a)(e,1)[0];return n||0===n?o.a.createElement(W,null):o.a.createElement(V,null)};r.a.render(o.a.createElement((function(){return o.a.createElement(m.a,null,o.a.createElement(q,null))}),null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.3dd6a8e9.chunk.js.map